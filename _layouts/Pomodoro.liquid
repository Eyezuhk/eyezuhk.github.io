---
layout: default
---

<style>
    html, body {
        max-width: none;
        margin: 0;
        padding: 0;
        height: 100%;
        overflow-x: hidden;
        overflow-y: auto;
    }
    
     #liveFrame {
        display: block;
        width: 100vw;
        height: 100vh;
        border: none;
		    overflow: hidden;
		position: fixed;
        top: 0;
        left: 0;
    }
	 .container, .wrapper{
		margin: 0 !important;
		padding: 0 !important;
		max-width: none !important;
		width: 100% !important;
	 }

</style>

 <iframe id="liveFrame"></iframe>

<script>
    const liveFrame = document.getElementById('liveFrame');

    // HTML da sua aplicação Pomodoro em Base64 (A SER ADICIONADO)
    const pomodoroAppBase64 = "PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbiI+DQoNCjxoZWFkPg0KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4NCiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+DQogICAgPHRpdGxlPkZuIFBvbW9kb3JvIFRpbWVyPC90aXRsZT4NCiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2ZvbnQtYXdlc29tZS82LjAuMC9jc3MvYWxsLm1pbi5jc3MiPg0KICAgIDxzdHlsZT4NCiAgICAgICAgOnJvb3Qgew0KICAgICAgICAgICAgLS1wcmltYXJ5LWNvbG9yOiAjZmY2YjZiOw0KICAgICAgICAgICAgLS1zaG9ydGJyZWFrLWNvbG9yOiAjNGRhYmY3Ow0KICAgICAgICAgICAgLS1sb25nYnJlYWstY29sb3I6ICM0MGMwNTc7DQogICAgICAgICAgICAtLWJnLWNvbG9yOiAjZmZmZmZmOw0KICAgICAgICAgICAgLS10ZXh0LWNvbG9yOiAjMzMzMzMzOw0KICAgICAgICAgICAgLS1vdmVybGF5LWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCk7DQogICAgICAgICAgICAtLWJ1dHRvbi13aWR0aDogMTIwcHg7DQogICAgICAgICAgICAtLWJ1dHRvbi1oZWlnaHQ6IDQwcHg7DQogICAgICAgICAgICAtLWZvbnQtZmFtaWx5OiBzeXN0ZW0tdWksIC1hcHBsZS1zeXN0ZW0sIHNhbnMtc2VyaWY7DQogICAgICAgICAgICAtLWJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICAtLXRyYW5zaXRpb24tc3BlZWQ6IDAuM3M7DQogICAgICAgIH0NCg0KICAgICAgICAuZGFyay1tb2RlIHsNCiAgICAgICAgICAgIC0tYmctY29sb3I6ICMwZDExMTc7DQogICAgICAgICAgICAtLXRleHQtY29sb3I6ICNmZmZmZmY7DQogICAgICAgICAgICAtLW92ZXJsYXktY29sb3I6IHJnYmEoMCwgMCwgMCwgMC42KTsNCiAgICAgICAgfQ0KDQogICAgICAgICogew0KICAgICAgICAgICAgbWFyZ2luOiAwOw0KICAgICAgICAgICAgcGFkZGluZzogMDsNCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgIH0NCg0KICAgICAgICBib2R5IHsNCiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LWZhbWlseSk7DQogICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1jb2xvcik7DQogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgdmFyKC0tdHJhbnNpdGlvbi1zcGVlZCkgZWFzZTsNCiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDEwMHZoOw0KICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsNCiAgICAgICAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjsNCiAgICAgICAgICAgIGJhY2tncm91bmQtYXR0YWNobWVudDogZml4ZWQ7DQogICAgICAgICAgICBsaW5lLWhlaWdodDogMS41Ow0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmctY29sb3IpOw0KCQkJbWFyZ2luLXRvcDogNjBweDsgLyogQWRpY2lvbmEgbWFyZ2VtIHN1cGVyaW9yIHBhcmEgZXZpdGFyIHNvYnJlcG9zacOnw6NvIGRhIG5hdmJhciAqLw0KICAgICAgICB9DQoNCiAgICAgICAgLmNvbnRhaW5lciB7DQogICAgICAgICAgICBtYXgtd2lkdGg6IDEwMDBweDsNCgkJCW1pbi13aWR0aDogNDAwcHg7DQogICAgICAgICAgICBtYXJnaW46IDAgYXV0bzsNCiAgICAgICAgfQ0KDQogICAgICAgIC50aW1lci1jb250YWluZXIgew0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgcGFkZGluZzogMnJlbTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMpOw0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KTsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDJyZW07DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCA2cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMSk7DQogICAgICAgIH0NCg0KICAgICAgICAudGltZXItZGlzcGxheSB7DQogICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgICAgICAgICB3aWR0aDogMzAwcHg7DQogICAgICAgICAgICBoZWlnaHQ6IDMwMHB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAycmVtIGF1dG87DQogICAgICAgIH0NCg0KICAgICAgICAucHJvZ3Jlc3MtcmluZyB7DQogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgICB0b3A6IDA7DQogICAgICAgICAgICBsZWZ0OiAwOw0KICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoLTkwZGVnKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5wcm9ncmVzcy1yaW5nX19jaXJjbGUgew0KICAgICAgICAgICAgdHJhbnNpdGlvbjogc3Ryb2tlLWRhc2hvZmZzZXQgdmFyKC0tdHJhbnNpdGlvbi1zcGVlZCk7DQogICAgICAgICAgICBzdHJva2UtbGluZWNhcDogcm91bmQ7DQogICAgICAgIH0NCg0KICAgICAgICAucHJvZ3Jlc3MtcmluZ19fY2lyY2xlLWJnIHsNCiAgICAgICAgICAgIG9wYWNpdHk6IDAuMjsNCiAgICAgICAgfQ0KDQogICAgICAgIC50aW1lIHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgIHRvcDogNTAlOw0KICAgICAgICAgICAgbGVmdDogNTAlOw0KICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7DQogICAgICAgICAgICBmb250LXNpemU6IDRyZW07DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGZvbnQtdmFyaWFudC1udW1lcmljOiB0YWJ1bGFyLW51bXM7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgIH0NCg0KICAgICAgICAucG9tby1jb3VudGVyIHsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4xcmVtOw0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMC41cmVtOw0KICAgICAgICAgICAgY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpOw0KDQogICAgICAgIH0NCg0KICAgICAgICAubW9kZS1idXR0b25zIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGdhcDogMXJlbTsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDFyZW07DQogICAgICAgIH0NCg0KICAgICAgICBidXR0b24gew0KICAgICAgICAgICAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCk7DQogICAgICAgICAgICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQpOw0KICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cyk7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgdmFyKC0tdHJhbnNpdGlvbi1zcGVlZCk7DQogICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGdhcDogMC41cmVtOw0KICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IGNhcGl0YWxpemU7DQogICAgICAgICAgICBmb250LXdlaWdodDogNTAwOw0KICAgICAgICAgICAgcGFkZGluZzogMCAxcmVtOw0KICAgICAgICB9DQoNCiAgICAgICAgYnV0dG9uLnBvbW9kb3JvIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpOw0KICAgICAgICB9DQoNCiAgICAgICAgYnV0dG9uLnNob3J0QnJlYWsgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2hvcnRicmVhay1jb2xvcik7DQogICAgICAgIH0NCg0KICAgICAgICBidXR0b24ubG9uZ0JyZWFrIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWxvbmdicmVhay1jb2xvcik7DQogICAgICAgIH0NCg0KICAgICAgICBidXR0b246aG92ZXIgew0KICAgICAgICAgICAgb3BhY2l0eTogMC45Ow0KICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xcHgpOw0KICAgICAgICB9DQoNCiAgICAgICAgYnV0dG9uOmFjdGl2ZSB7DQogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7DQogICAgICAgIH0NCg0KICAgICAgICAuY29udHJvbHMgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgZ2FwOiAxcmVtOw0KICAgICAgICAgICAgbWFyZ2luOiAycmVtIDA7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7DQogICAgICAgIH0NCg0KICAgICAgICAucGFuZWwgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEuNXJlbTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMpOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMnJlbTsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDZweCAtMXB4IHJnYmEoMCwgMCwgMCwgMC4xKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5zdGF0cy1ncmlkIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7DQogICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpdCwgbWlubWF4KDIwMHB4LCAxZnIpKTsNCiAgICAgICAgICAgIGdhcDogMS41cmVtOw0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMXJlbTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5zdGF0LWNhcmQgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA1KTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEuNXJlbTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMpOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4wNSk7DQogICAgICAgIH0NCg0KICAgICAgICAuc3RhdC12YWx1ZSB7DQogICAgICAgICAgICBmb250LXNpemU6IDJyZW07DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDAuNXJlbTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5zZXR0aW5ncy1ncm91cCB7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAycmVtOw0KICAgICAgICB9DQoNCiAgICAgICAgLnNldHRpbmdzLWdyb3VwIGgzIHsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDFyZW07DQogICAgICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7DQogICAgICAgICAgICBmb250LXNpemU6IDEuMjVyZW07DQogICAgICAgIH0NCg0KICAgICAgICAuc2V0dGluZy1pbnB1dC1ncm91cCB7DQogICAgICAgICAgICBkaXNwbGF5OiBncmlkOw0KICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiBhdXRvIDFmciBhdXRvOw0KICAgICAgICAgICAgZ2FwOiAxcmVtOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMXJlbTsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgIH0NCgkJDQoJCS5zZXR0aW5nLWlucHV0LWdyb3VwIHNlbGVjdDpmb2N1cyB7DQoJCQlvdXRsaW5lOiBub25lOw0KCQkJYm9yZGVyLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsNCgkJfQ0KDQoJCS5zZXR0aW5nLWlucHV0LWdyb3VwIHNlbGVjdCBvcHRpb24gew0KCQliYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iZy1jb2xvcik7DQoJCWNvbG9yOiB2YXIoLS10ZXh0LWNvbG9yKTsNCgkJfQ0KDQogICAgICAgIC5zZXR0aW5nLWlucHV0LWdyb3VwIGxhYmVsIHsNCiAgICAgICAgICAgIGdyaWQtY29sdW1uOiAxOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5zZXR0aW5nLWlucHV0LWdyb3VwPio6bnRoLWNoaWxkKDIpIHsNCiAgICAgICAgICAgIGdyaWQtY29sdW1uOiAyOw0KICAgICAgICB9DQoNCiAgICAgICAgLnNldHRpbmctaW5wdXQtZ3JvdXA+KjpudGgtY2hpbGQoMykgew0KICAgICAgICAgICAgZ3JpZC1jb2x1bW46IDM7DQogICAgICAgICAgICBqdXN0aWZ5LXNlbGY6IHN0YXJ0Ow0KICAgICAgICB9DQoNCiAgICAgICAgaW5wdXRbdHlwZT0ibnVtYmVyIl0sDQogICAgICAgIGlucHV0W3R5cGU9InRleHQiXSwNCiAgICAgICAgc2VsZWN0IHsNCiAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbSAxcmVtOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cyk7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDE1NiwgMTYzLCAxNzUsIDAuMik7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpOw0KICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtY29sb3IpOw0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICB0cmFuc2l0aW9uOiBib3JkZXItY29sb3IgdmFyKC0tdHJhbnNpdGlvbi1zcGVlZCk7DQogICAgICAgIH0NCg0KICAgICAgICBpbnB1dFt0eXBlPSJudW1iZXIiXTpmb2N1cywNCiAgICAgICAgaW5wdXRbdHlwZT0idGV4dCJdOmZvY3VzLA0KICAgICAgICBzZWxlY3Q6Zm9jdXMgew0KICAgICAgICAgICAgb3V0bGluZTogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7DQogICAgICAgIH0NCg0KICAgICAgICAudGFzay1pbnB1dC1jb250YWluZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMXJlbTsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEuNXJlbTsNCiAgICAgICAgfQ0KDQogICAgICAgIC50YXNrLWl0ZW0gew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBwYWRkaW5nOiAxcmVtOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cyk7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMC41cmVtOw0KICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIHZhcigtLXRyYW5zaXRpb24tc3BlZWQpOw0KICAgICAgICB9DQoNCiAgICAgICAgLnRhc2staXRlbTpob3ZlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7DQogICAgICAgIH0NCg0KICAgICAgICAudGFzay1pdGVtLmNvbXBsZXRlZCB7DQogICAgICAgICAgICBvcGFjaXR5OiAwLjc7DQogICAgICAgIH0NCg0KICAgICAgICAudGFzay1pdGVtLmNvbXBsZXRlZCBzcGFuIHsNCiAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbGluZS10aHJvdWdoOw0KICAgICAgICB9DQoNCiAgICAgICAgLm5vdGlmaWNhdGlvbiB7DQogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgICAgICB0b3A6IDIwcHg7DQogICAgICAgICAgICByaWdodDogMjBweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDFyZW0gMS41cmVtOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cyk7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIG9wYWNpdHk6IDA7DQogICAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IHZhcigtLXRyYW5zaXRpb24tc3BlZWQpOw0KICAgICAgICAgICAgei1pbmRleDogMTAwMDsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDZweCAtMXB4IHJnYmEoMCwgMCwgMCwgMC4xKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5ub3RpZmljYXRpb24uc2hvdyB7DQogICAgICAgICAgICBvcGFjaXR5OiAxOw0KICAgICAgICB9DQoNCiAgICAgICAgLmtleWJvYXJkLXNob3J0Y3V0cyB7DQogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgICAgICBib3R0b206IDIwcHg7DQogICAgICAgICAgICByaWdodDogMjBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLW92ZXJsYXktY29sb3IpOw0KICAgICAgICAgICAgcGFkZGluZzogMXJlbSAxLjVyZW07DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzKTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07DQogICAgICAgICAgICB6LWluZGV4OiAxMDAwOw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggNnB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjEpOw0KICAgICAgICB9DQoNCiAgICAgICAgLnRoZW1lLXRvZ2dsZSB7DQogICAgICAgICAgICBwb3NpdGlvbjogZmxleDsNCiAgICAgICAgICAgIHotaW5kZXg6IDEwMDsNCiAgICAgICAgICAgIHdpZHRoOiA0MHB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiA0MHB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOw0KICAgICAgICAgICAgcGFkZGluZzogMDsNCiAgICAgICAgICAgIG1hcmdpbjogMHJlbTsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZjZiNmI7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgY29sb3I6ICNmZmZmZmY7DQogICAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIHZhcigtLXRyYW5zaXRpb24tc3BlZWQpOw0KICAgICAgICB9DQoNCiAgICAgICAgLnRoZW1lLXRvZ2dsZTpob3ZlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSk7DQogICAgICAgIH0NCg0KICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHsNCiAgICAgICAgICAgIC5jb250YWluZXIgew0KICAgICAgICAgICAgICAgIHBhZGRpbmc6IDFyZW07DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC50aW1lci1kaXNwbGF5IHsNCiAgICAgICAgICAgICAgICB3aWR0aDogMzAwcHg7DQogICAgICAgICAgICAgICAgaGVpZ2h0OiAzMDBweDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLnRpbWUgew0KICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogM3JlbTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLmtleWJvYXJkLXNob3J0Y3V0cyB7DQogICAgICAgICAgICAgICAgZGlzcGxheTogbm9uZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLnN0YXRzLWdyaWQgew0KICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAuc2V0dGluZy1pbnB1dC1ncm91cCB7DQogICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogc3RyZXRjaDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaW5wdXRbdHlwZT0ibnVtYmVyIl0sDQogICAgICAgICAgICBpbnB1dFt0eXBlPSJ0ZXh0Il0sDQogICAgICAgICAgICBzZWxlY3Qgew0KICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC50YXNrLWFjdGlvbnMgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMC41cmVtOw0KICAgICAgICB9DQoNCiAgICAgICAgLnRhc2stYWN0aW9ucyBidXR0b24gew0KICAgICAgICAgICAgd2lkdGg6IGF1dG87DQogICAgICAgICAgICBoZWlnaHQ6IGF1dG87DQogICAgICAgICAgICBwYWRkaW5nOiAwLjVyZW07DQogICAgICAgIH0NCg0KICAgICAgICAucG9tb2Rvcm8tY291bnQgew0KICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTsNCiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC50YXNrLXNlbGVjdGlvbi1jb250YWluZXIgew0KICAgICAgICAgICAgbWFyZ2luOiAxLjVyZW0gMDsNCiAgICAgICAgfQ0KDQogICAgICAgIHNlbGVjdCN0YXNrU2VsZWN0IHsNCiAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvOw0KICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iZy1jb2xvcik7DQogICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1jb2xvcik7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDE1NiwgMTYzLCAxNzUsIDAuMik7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzKTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbTsNCiAgICAgICAgfQ0KDQogICAgICAgIHNlbGVjdCN0YXNrU2VsZWN0IG9wdGlvbiB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iZy1jb2xvcik7DQogICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1jb2xvcik7DQogICAgICAgIH0NCg0KICAgICAgICAueW91dHViZS1jb250YWluZXIgew0KICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNTYuMjUlOw0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMnJlbTsNCiAgICAgICAgfQ0KDQogICAgICAgIC55b3V0dWJlLWNvbnRhaW5lciBpZnJhbWUgew0KICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICAgICAgdG9wOiAwOw0KICAgICAgICAgICAgbGVmdDogMDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5oaWRlIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5hY3RpdmUgew0KICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDEycHggcmdiYSgwLCAwLCAwLCAwLjEpOw0KICAgICAgICB9DQogICAgPC9zdHlsZT4NCjwvaGVhZD4NCg0KPGJvZHk+DQogICAgPGRpdiBjbGFzcz0iY29udGFpbmVyIj4NCiAgICAgICAgPGRpdiBjbGFzcz0idGltZXItY29udGFpbmVyIj4NCgkJCTxidXR0b24gY2xhc3M9InRoZW1lLXRvZ2dsZSIgb25jbGljaz0idG9nZ2xlVGhlbWUoKSIgdGl0bGU9IlRvZ2dsZSB0aGVtZSI+DQoJCQkJPGkgY2xhc3M9ImZhcyBmYS1tb29uIj48L2k+DQoJCQk8L2J1dHRvbj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGUtYnV0dG9ucyI+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJzZXRNb2RlKCdwb21vZG9ybycpIiBkYXRhLW1vZGU9InBvbW9kb3JvIiBjbGFzcz0icG9tb2Rvcm8gYWN0aXZlIg0KICAgICAgICAgICAgICAgICAgICB0aXRsZT0iU3RhcnQgUG9tb2Rvcm8iPg0KICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLWNsb2NrIj48L2k+IFBvbW9kb3JvDQogICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJzZXRNb2RlKCdzaG9ydEJyZWFrJykiIGRhdGEtbW9kZT0ic2hvcnRCcmVhayIgY2xhc3M9InNob3J0QnJlYWsiDQogICAgICAgICAgICAgICAgICAgIHRpdGxlPSJTdGFydCBzaG9ydCBicmVhayI+DQogICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtY29mZmVlIj48L2k+IFNob3J0IEJyZWFrDQogICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJzZXRNb2RlKCdsb25nQnJlYWsnKSIgZGF0YS1tb2RlPSJsb25nQnJlYWsiIGNsYXNzPSJsb25nQnJlYWsiDQogICAgICAgICAgICAgICAgICAgIHRpdGxlPSJTdGFydCBsb25nIGJyZWFrIj4NCiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1jb3VjaCI+PC9pPiBMb25nIEJyZWFrDQogICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0idGFzay1zZWxlY3Rpb24tY29udGFpbmVyIj4NCiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJ0YXNrU2VsZWN0IiBhcmlhLWxhYmVsPSJTZWxlY3QgY3VycmVudCB0YXNrIj4NCiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj5TZWxlY3QgYSB0YXNrPC9vcHRpb24+DQogICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0idGltZXItZGlzcGxheSIgcm9sZT0idGltZXIiPg0KICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9InByb2dyZXNzLXJpbmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIj4NCiAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBjbGFzcz0icHJvZ3Jlc3MtcmluZ19fY2lyY2xlLWJnIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSI4IiBmaWxsPSJ0cmFuc3BhcmVudCINCiAgICAgICAgICAgICAgICAgICAgICAgIHI9IjE0MCIgY3g9IjE1MCIgY3k9IjE1MCIgLz4NCiAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBjbGFzcz0icHJvZ3Jlc3MtcmluZ19fY2lyY2xlIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSI4IiBmaWxsPSJ0cmFuc3BhcmVudCINCiAgICAgICAgICAgICAgICAgICAgICAgIHI9IjE0MCIgY3g9IjE1MCIgY3k9IjE1MCIgLz4NCiAgICAgICAgICAgICAgICA8L3N2Zz4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0aW1lIiBpZD0idGltZSIgYXJpYS1saXZlPSJwb2xpdGUiPg0KICAgICAgICAgICAgICAgICAgICA8c3Bhbj4yNTowMDwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgPHNwYW4+PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0icG9tby1jb3VudGVyIiBpZD0idG90YWxQb21vZG9yb3MiPjA8L3NwYW4+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udHJvbHMiPg0KICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ic3RhcnRUaW1lcigpIiBpZD0ic3RhcnRCdG4iIGNsYXNzPSJwb21vZG9ybyIgdGl0bGU9IlN0YXJ0L1BhdXNlIHRpbWVyIj4NCiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1wbGF5Ij48L2k+IFN0YXJ0DQogICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJyZXNldFRpbWVyKCkiIGNsYXNzPSJwb21vZG9ybyIgdGl0bGU9IlJlc2V0IHRpbWVyIj4NCiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1yZWRvIj48L2k+IFJlc2V0DQogICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJ0b2dnbGVTZXR0aW5ncygpIiBjbGFzcz0icG9tb2Rvcm8iIHRpdGxlPSJUb2dnbGUgc2V0dGluZ3MgcGFuZWwiPg0KICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLWNvZyI+PC9pPiBTZXR0aW5ncw0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgY2xhc3M9InBhbmVsIiBpZD0idGFza0xpc3RQYW5lbCI+DQogICAgICAgICAgICA8aDM+VGFza3M8L2gzPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0idGFzay1pbnB1dC1jb250YWluZXIiPg0KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0idGFza0lucHV0IiBwbGFjZWhvbGRlcj0iQWRkIGEgbmV3IHRhc2siIG9ua2V5ZG93bj0iaGFuZGxlVGFza0lucHV0KGV2ZW50KSI+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0icG9tb2Rvcm8iIG9uY2xpY2s9ImFkZFRhc2soKSI+QWRkIFRhc2s8L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBpZD0idGFza0xpc3QiPjwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IGNsYXNzPSJwYW5lbCIgaWQ9InN0YXRzUGFuZWwiPg0KICAgICAgICAgICAgPGgzPlN0YXRpc3RpY3M8L2gzPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdHMtZ3JpZCI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC1jYXJkIj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC12YWx1ZSIgaWQ9InRvdGFsUG9tb2Rvcm9zU3RhdCI+MDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8ZGl2PlRvdGFsIFBvbW9kb3JvczwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtY2FyZCI+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtdmFsdWUiIGlkPSJ0b3RhbFRpbWUiPjBoIDBtPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDxkaXY+Rm9jdXMgVGltZTwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtY2FyZCI+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtdmFsdWUiIGlkPSJkYWlseVN0cmVhayI+MDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8ZGl2PkRhaWx5IFN0cmVhazwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgY2xhc3M9InBhbmVsIiBpZD0ic2V0dGluZ3NQYW5lbCIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNldHRpbmdzLWdyb3VwIj4NCiAgICAgICAgICAgICAgICA8aDM+WW91VHViZSBNdXNpYzwvaDM+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2V0dGluZy1pbnB1dC1ncm91cCI+DQogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9InlvdXR1YmVVcmwiPllvdVR1YmUgVmlkZW8gVVJMPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJ5b3V0dWJlVXJsIiBwbGFjZWhvbGRlcj0iRW50ZXIgWW91VHViZSB2aWRlbyBVUkwiDQogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT0iaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1qZktmUGZ5SlJkayI+DQogICAgICAgICAgICAgICAgICAgIDxkaXY+PC9kaXY+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNldHRpbmdzLWdyb3VwIj4NCiAgICAgICAgICAgICAgICA8aDM+VGltZXIgU2V0dGluZ3M8L2gzPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNldHRpbmctaW5wdXQtZ3JvdXAiPg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJwb21vZG9yb1RpbWUiPlBvbW9kb3JvIChtaW51dGVzKTwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJwb21vZG9yb1RpbWUiIHZhbHVlPSIyNSIgbWluPSIwIiBtYXg9IjYwMCI+DQogICAgICAgICAgICAgICAgICAgIDxkaXY+PC9kaXY+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2V0dGluZy1pbnB1dC1ncm91cCI+DQogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9InNob3J0QnJlYWtUaW1lIj5TaG9ydCBCcmVhayAobWludXRlcyk8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0ic2hvcnRCcmVha1RpbWUiIHZhbHVlPSI1IiBtaW49IjAiIG1heD0iMzAwIj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdj48L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZXR0aW5nLWlucHV0LWdyb3VwIj4NCiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0ibG9uZ0JyZWFrVGltZSI+TG9uZyBCcmVhayAobWludXRlcyk8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0ibG9uZ0JyZWFrVGltZSIgdmFsdWU9IjE1IiBtaW49IjAiIG1heD0iNjAwIj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdj48L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZXR0aW5nLWlucHV0LWdyb3VwIj4NCiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0icG9tb2Rvcm9zQmVmb3JlTG9uZ0JyZWFrIj5Qb21vZG9yb3MgQmVmb3JlIExvbmcgQnJlYWs8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0icG9tb2Rvcm9zQmVmb3JlTG9uZ0JyZWFrIiB2YWx1ZT0iNCIgbWluPSIxIiBtYXg9IjEwIj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdj48L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZXR0aW5nLWlucHV0LWdyb3VwIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsiPg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJhdXRvU3RhcnRCcmVha3MiPkF1dG8gU3RhcnQgQnJlYWtzL1BvbW9zPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iYXV0b1N0YXJ0QnJlYWtzIiBjaGVja2VkPg0KICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNldHRpbmctaW5wdXQtZ3JvdXAiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyI+DQogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9ImF1dG9TdGFydEJyZWFrcyI+S2V5Ym9hcmQgU2hvcnRjdXRzPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0icG9tb2Rvcm8iIG9uY2xpY2s9InRvZ2dsZUtleWJvYXJkU2hvcnRjdXRzKCkiPkhpZGUvU2hvdzwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNldHRpbmdzLWdyb3VwIj4NCiAgICAgICAgICAgICAgICA8aDM+Tm90aWZpY2F0aW9uIFNvdW5kczwvaDM+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2V0dGluZy1pbnB1dC1ncm91cCI+DQogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9InBvbW9kb3JvU291bmQiPlBvbW9kb3JvIEVuZCBTb3VuZDwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InBvbW9kb3JvU291bmQiPg0KCQkJCQkJPG9wdGlvbiB2YWx1ZT0iY2hpbWUiPkNoaW1lPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJiZWxsIj5CZWxsPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJkaW5nIj5EaW5nPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNldHRpbmctaW5wdXQtZ3JvdXAiPg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJzaG9ydEJyZWFrU291bmQiPlNob3J0IEJyZWFrIEVuZCBTb3VuZDwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InNob3J0QnJlYWtTb3VuZCI+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJiZWxsIj5CZWxsPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJjaGltZSI+Q2hpbWU8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImRpbmciPkRpbmc8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxkaXY+PC9kaXY+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2V0dGluZy1pbnB1dC1ncm91cCI+DQogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9ImxvbmdCcmVha1NvdW5kIj5Mb25nIEJyZWFrIEVuZCBTb3VuZDwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImxvbmdCcmVha1NvdW5kIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImRpbmciPkRpbmc8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImJlbGwiPkJlbGw8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImNoaW1lIj5DaGltZTwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgICAgICAgICAgPGRpdj48L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZXR0aW5nLWlucHV0LWdyb3VwIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsiPg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJtdXRlU291bmRzIj5EaXNhYmxlIFNvdW5kczwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9Im11dGVTb3VuZHMiPg0KICAgICAgICAgICAgICAgICAgICA8ZGl2PjwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNldHRpbmdzLWdyb3VwIj4NCiAgICAgICAgICAgICAgICA8aDM+QmFja2dyb3VuZDwvaDM+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2V0dGluZy1pbnB1dC1ncm91cCI+DQogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9ImJnVXJsIj5CYWNrZ3JvdW5kIFVSTDwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iYmdVcmwiIHBsYWNlaG9sZGVyPSJFbnRlciBpbWFnZSBVUkwiPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJwb21vZG9ybyIgb25jbGljaz0idXBkYXRlQmFja2dyb3VuZCgndXJsJykiPlVwZGF0ZSBVUkw8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZXR0aW5nLWlucHV0LWdyb3VwIj4NCiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iYmdGaWxlIj5VcGxvYWQgSW1hZ2U8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImJnRmlsZSIgYWNjZXB0PSJpbWFnZS8qIj4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0icG9tb2Rvcm8iIG9uY2xpY2s9InVwZGF0ZUJhY2tncm91bmQoJ2ZpbGUnKSI+VXBkYXRlIEZpbGU8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZXR0aW5nLWlucHV0LWdyb3VwIj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdj48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0icG9tb2Rvcm8iIG9uY2xpY2s9InJlbW92ZUJhY2tncm91bmQoKSI+UmVtb3ZlIEJhY2tncm91bmQ8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZXR0aW5ncy1ncm91cCI+DQogICAgICAgICAgICAgICAgPGgzPlJlc2V0IFNldHRpbmdzPC9oMz4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZXR0aW5nLWlucHV0LWdyb3VwIj4NCiAgICAgICAgICAgICAgICAgICAgPGRpdj48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0icG9tb2Rvcm8iIG9uY2xpY2s9InJlc2V0QWxsU2V0dGluZ3MoKSIgdGl0bGU9IlJlc2V0IGFsbCBzZXR0aW5ncyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLXVuZG8iPjwvaT4gUmVzZXQgQWxsDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgICAgICA8ZGl2IGNsYXNzPSJ5b3V0dWJlLWNvbnRhaW5lciI+DQogICAgICAgICAgICA8ZGl2IGlkPSJ5b3V0dWJlUGxheWVyIj48L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8ZGl2IGNsYXNzPSJub3RpZmljYXRpb24iIGlkPSJub3RpZmljYXRpb24iPjwvZGl2Pg0KDQogICAgPGRpdiBjbGFzcz0ia2V5Ym9hcmQtc2hvcnRjdXRzIiBpZD0ia2V5Ym9hcmRTaG9ydGN1dHMiIG9uY2xpY2s9InRvZ2dsZUtleWJvYXJkU2hvcnRjdXRzKCkiPg0KICAgICAgICA8c3Ryb25nPktleWJvYXJkIFNob3J0Y3V0czo8L3N0cm9uZz4NCiAgICAgICAgPGRpdj5TcGFjZSAtIFN0YXJ0L1BhdXNlPC9kaXY+DQogICAgICAgIDxkaXY+UiAtIFJlc2V0IFRpbWVyPC9kaXY+DQogICAgICAgIDxkaXY+MSAtIFBvbW9kb3JvPC9kaXY+DQogICAgICAgIDxkaXY+MiAtIFNob3J0IEJyZWFrPC9kaXY+DQogICAgICAgIDxkaXY+MyAtIExvbmcgQnJlYWs8L2Rpdj4NCiAgICAgICAgPGRpdj5DbGljayBoZXJlIHRvIGhpZGU8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgICA8c2NyaXB0Pg0KICAgICAgICAgIC8vIC0tLSBVdGlsaXR5IEZ1bmN0aW9ucyAtLS0NCiAgICAgICAgY29uc3QgZWwgPSBpZCA9PiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgICAgIGNvbnN0IGZvcm1hdFRpbWUgPSBzZWNvbmRzID0+IHsNCiAgICAgICAgICAgIGlmIChzZWNvbmRzIDwgMzYwMCkgeyAvLyBNZW5vcyBkZSAxIGhvcmENCiAgICAgICAgICAgICAgICBjb25zdCBtaW5zID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gNjApOw0KICAgICAgICAgICAgICAgIGNvbnN0IHNlY3MgPSBzZWNvbmRzICUgNjA7DQogICAgICAgICAgICAgICAgcmV0dXJuIGAke1N0cmluZyhtaW5zKS5wYWRTdGFydCgyLCAnMCcpfToke1N0cmluZyhzZWNzKS5wYWRTdGFydCgyLCAnMCcpfWA7DQogICAgICAgICAgICB9IGVsc2UgeyAvLyBNYWlzIGRlIDEgaG9yYQ0KICAgICAgICAgICAgICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gMzYwMCk7DQogICAgICAgICAgICAgICAgY29uc3QgbWlucyA9IE1hdGguZmxvb3IoKHNlY29uZHMgJSAzNjAwKSAvIDYwKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYCR7aG91cnN9aCAke21pbnN9bWA7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQoNCiAgICAgICAgLy8gRnVuw6fDo28gcGFyYSBjcmlhciBiZWVwDQogICAgDQogICAgICAgIGNvbnN0IHNob3dOb3RpZmljYXRpb24gPSAobWVzc2FnZSkgPT4gew0KICAgICAgICAgICBpZiAoJ05vdGlmaWNhdGlvbicgaW4gd2luZG93KSB7DQogICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKHBlcm1pc3Npb24gPT4gew0KICAgICAgICAgICAgICAgICAgIGlmKHBlcm1pc3Npb24gPT09ICJncmFudGVkIil7DQogICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpZmljYXRpb24obWVzc2FnZSk7DQogICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICB9DQogICAgICAgICAgICBjb25zdCBub3RpZmljYXRpb24gPSBlbCgnbm90aWZpY2F0aW9uJyk7DQogICAgICAgICAgICBub3RpZmljYXRpb24udGV4dENvbnRlbnQgPSBtZXNzYWdlOw0KICAgICAgICAgICAgbm90aWZpY2F0aW9uLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTsNCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gbm90aWZpY2F0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKSwgMzAwMCk7DQogICAgICAgIH07DQogICAgICAgIGNvbnN0IGVzY2FwZUh0bWwgPSB0ZXh0ID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgZGl2LnRleHRDb250ZW50ID0gdGV4dDsNCiAgICAgICAgICAgIHJldHVybiBkaXYuaW5uZXJIVE1MOw0KICAgICAgICB9Ow0KDQogICAgICAgIC8vIC0tLSBDb25zdGFudHMgLS0tDQogICAgICAgIGNvbnN0IERFRkFVTFRfVElNRVMgPSB7IHBvbW9kb3JvOiAyNSAqIDYwLCBzaG9ydEJyZWFrOiA1ICogNjAsIGxvbmdCcmVhazogMTUgKiA2MCB9Ow0KICAgICAgICBjb25zdCBERUZBVUxUX1NPVU5EUyA9IHsgcG9tb2Rvcm86ICdjaGltZScsIHNob3J0QnJlYWs6ICdiZWxsJywgbG9uZ0JyZWFrOiAnZGluZycgfTsNCiAgICAgICAgY29uc3QgQ0lSQ0xFX1JBRElVUyA9IDE0MDsNCiAgICAgICAgY29uc3QgQ0lSQ0xFX0NJUkNVTUZFUkVOQ0UgPSAyICogTWF0aC5QSSAqIENJUkNMRV9SQURJVVM7DQogICAgICAgIGNvbnN0IERFRkFVTFRfWU9VVFVCRV9VUkwgPSAiaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1qZktmUGZ5SlJkayI7DQogICAgICAgIGNvbnN0IGNvbG9ycyA9IHsNCiAgICAgICAgICAgIHBvbW9kb3JvOiAnI2ZmNmI2YicsDQogICAgICAgICAgICBzaG9ydEJyZWFrOiAnIzRkYWJmNycsDQogICAgICAgICAgICBsb25nQnJlYWs6ICcjNDBjMDU3Jw0KICAgICAgICB9Ow0KDQogICAgICAgIC8vIC0tLSBTdGF0ZSBWYXJpYWJsZXMgLS0tDQogICAgICAgIGxldCB0aW1lTGVmdDsNCiAgICAgICAgbGV0IHRpbWVySWQ7DQogICAgICAgIGxldCBjdXJyZW50TW9kZSA9ICdwb21vZG9ybyc7DQogICAgICAgIGxldCB0YXNrcyA9IFtdOw0KICAgICAgICBsZXQgc2VsZWN0ZWRUYXNrSW5kZXggPSBudWxsOw0KICAgICAgICBsZXQgYXV0b1N0YXJ0QnJlYWtzID0gdHJ1ZTsNCiAgICAgICAgbGV0IHBvbW9kb3JvQ291bnQgPSAwOw0KICAgICAgICBsZXQgcG9tb2Rvcm9zQmVmb3JlTG9uZ0JyZWFrID0gNDsNCiAgICAgICAgbGV0IG5vdGlmaWNhdGlvblNvdW5kcyA9IHsgLi4uREVGQVVMVF9TT1VORFMgfTsNCiAgICAgICAgbGV0IG11dGVTb3VuZHMgPSBmYWxzZTsNCiAgICAgICAgbGV0IHN0YXRpc3RpY3MgPSB7IHRvdGFsUG9tb2Rvcm9zOiAwLCB0b3RhbEZvY3VzVGltZTogMCwgZGFpbHlTdHJlYWs6IDAsIGxhc3RDb21wbGV0ZWQ6IG51bGwgfTsNCiAgICAgICAgbGV0IHRpbWVzID0geyAuLi5ERUZBVUxUX1RJTUVTIH07DQogICAgICAgIGxldCB5b3V0dWJlUGxheWVyOw0KDQogICAgICAgIC8vIC0tLSBET00gRWxlbWVudHMgLS0tDQogICAgICAgIGNvbnN0IHRpbWVEaXNwbGF5ID0gZWwoJ3RpbWUnKS5xdWVyeVNlbGVjdG9yKCdzcGFuJyk7DQogICAgICAgIGNvbnN0IHBvbW9Db3VudGVyRGlzcGxheSA9IGVsKCd0aW1lJykucXVlcnlTZWxlY3RvcignLnBvbW8tY291bnRlcicpOw0KICAgICAgICBjb25zdCBzdGFydEJ0biA9IGVsKCdzdGFydEJ0bicpOw0KICAgICAgICBjb25zdCBtb2RlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RlLWJ1dHRvbnMgYnV0dG9uJyk7DQogICAgICAgIGNvbnN0IHByb2dyZXNzQ2lyY2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXJpbmdfX2NpcmNsZScpOw0KICAgICAgICBjb25zdCBwcm9ncmVzc0NpcmNsZUJnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLXJpbmdfX2NpcmNsZS1iZycpOw0KICAgICAgICBjb25zdCBrZXlib2FyZFNob3J0Y3V0c0RpdiA9IGVsKCdrZXlib2FyZFNob3J0Y3V0cycpOw0KICAgICAgICBwcm9ncmVzc0NpcmNsZS5zdHlsZS5zdHJva2VEYXNoYXJyYXkgPSBgJHtDSVJDTEVfQ0lSQ1VNRkVSRU5DRX0gJHtDSVJDTEVfQ0lSQ1VNRkVSRU5DRX1gOw0KICAgICAgICBwcm9ncmVzc0NpcmNsZUJnLnN0eWxlLnN0cm9rZURhc2hhcnJheSA9IGAke0NJUkNMRV9DSVJDVU1GRVJFTkNFfSAke0NJUkNMRV9DSVJDVU1GRVJFTkNFfWA7DQoNCiAgICAgICAgLy8gLS0tIFlvdVR1YmUgQVBJIC0tLQ0KICAgICAgICBmdW5jdGlvbiBvbllvdVR1YmVJZnJhbWVBUElSZWFkeSgpIHsNCiAgICAgICAgICAgIHlvdXR1YmVQbGF5ZXIgPSBuZXcgWVQuUGxheWVyKCd5b3V0dWJlUGxheWVyJywgew0KICAgICAgICAgICAgICAgIGhlaWdodDogJzM2MCcsDQogICAgICAgICAgICAgICAgd2lkdGg6ICc2NDAnLA0KICAgICAgICAgICAgICAgIHZpZGVvSWQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd5b3V0dWJlVmlkZW9JZCcpIHx8IGdldFZpZGVvSWQoREVGQVVMVF9ZT1VUVUJFX1VSTCksDQogICAgICAgICAgICAgICAgcGxheWVyVmFyczogeyAncGxheXNpbmxpbmUnOiAxIH0sDQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgICBjb25zdCB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsNCiAgICAgICAgdGFnLnNyYyA9ICJodHRwczovL3d3dy55b3V0dWJlLmNvbS9pZnJhbWVfYXBpIjsNCiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0YWcpOw0KDQogICAgICAgIGNvbnN0IGdldFZpZGVvSWQgPSAodXJsKSA9PiB7DQogICAgICAgICAgICBjb25zdCBtYXRjaCA9IHVybC5tYXRjaCgvKD86eW91dHVcLmJlXC98eW91dHViZVwuY29tXC8oPzplbWJlZFwvfHZcL3x3YXRjaFw/dj18IFNob3J0c1wvKSkoW2EtekEtWjAtOV8tXSspLyk7DQogICAgICAgICAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSA6IG51bGw7DQogICAgICAgIH07DQoNCiAgICAgICAgLy8gLS0tIExvY2FsIFN0b3JhZ2UgLS0tDQogICAgICAgIGNvbnN0IGxvYWRTZXR0aW5ncyA9ICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncG9tb2Rvcm9TZXR0aW5ncycpIHx8ICd7fScpOw0KICAgICAgICAgICAgdGltZXMgPSBzZXR0aW5ncy50aW1lcyB8fCB7IC4uLkRFRkFVTFRfVElNRVMgfTsNCiAgICAgICAgICAgIHRhc2tzID0gc2V0dGluZ3MudGFza3MgfHwgW107DQogICAgICAgICAgICBzdGF0aXN0aWNzID0gc2V0dGluZ3Muc3RhdGlzdGljcyB8fCB7IHRvdGFsUG9tb2Rvcm9zOiAwLCB0b3RhbEZvY3VzVGltZTogMCwgZGFpbHlTdHJlYWs6IDAsIGxhc3RDb21wbGV0ZWQ6IG51bGwgfTsNCiAgICAgICAgICAgIGF1dG9TdGFydEJyZWFrcyA9IHNldHRpbmdzLmF1dG9TdGFydEJyZWFrcyA/PyB0cnVlOw0KICAgICAgICAgICAgcG9tb2Rvcm9zQmVmb3JlTG9uZ0JyZWFrID0gc2V0dGluZ3MucG9tb2Rvcm9zQmVmb3JlTG9uZ0JyZWFrID8/IDQ7DQogICAgICAgICAgICBub3RpZmljYXRpb25Tb3VuZHMgPSBzZXR0aW5ncy5ub3RpZmljYXRpb25Tb3VuZHMgfHwgeyAuLi5ERUZBVUxUX1NPVU5EUyB9Ow0KICAgICAgICAgICAgbXV0ZVNvdW5kcyA9IHNldHRpbmdzLm11dGVTb3VuZHMgPz8gZmFsc2U7DQogICAgICAgICAgICBzZWxlY3RlZFRhc2tJbmRleCA9IHNldHRpbmdzLnNlbGVjdGVkVGFza0luZGV4ID8/IG51bGw7DQogICAgICAgICAgICBjb25zdCBiZyA9IHNldHRpbmdzLmJhY2tncm91bmQ7DQogICAgICAgICAgICBpZiAoYmcpIGRvY3VtZW50LmJvZHkuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgnJHtiZ30nKWA7DQogICAgICAgICAgICBlbCgncG9tb2Rvcm9UaW1lJykudmFsdWUgPSB0aW1lcy5wb21vZG9ybyAvIDYwOw0KICAgICAgICAgICAgZWwoJ3Nob3J0QnJlYWtUaW1lJykudmFsdWUgPSB0aW1lcy5zaG9ydEJyZWFrIC8gNjA7DQogICAgICAgICAgICBlbCgnbG9uZ0JyZWFrVGltZScpLnZhbHVlID0gdGltZXMubG9uZ0JyZWFrIC8gNjA7DQogICAgICAgICAgICBlbCgncG9tb2Rvcm9zQmVmb3JlTG9uZ0JyZWFrJykudmFsdWUgPSBwb21vZG9yb3NCZWZvcmVMb25nQnJlYWs7DQogICAgICAgICAgICBlbCgnYXV0b1N0YXJ0QnJlYWtzJykuY2hlY2tlZCA9IGF1dG9TdGFydEJyZWFrczsNCiAgICAgICAgICAgIGVsKCdwb21vZG9yb1NvdW5kJykudmFsdWUgPSBub3RpZmljYXRpb25Tb3VuZHMucG9tb2Rvcm87DQogICAgICAgICAgICBlbCgnc2hvcnRCcmVha1NvdW5kJykudmFsdWUgPSBub3RpZmljYXRpb25Tb3VuZHMuc2hvcnRCcmVhazsNCiAgICAgICAgICAgIGVsKCdsb25nQnJlYWtTb3VuZCcpLnZhbHVlID0gbm90aWZpY2F0aW9uU291bmRzLmxvbmdCcmVhazsNCiAgICAgICAgICAgIGVsKCdtdXRlU291bmRzJykuY2hlY2tlZCA9IG11dGVTb3VuZHM7DQogICAgICAgICAgICBlbCgneW91dHViZVVybCcpLnZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3lvdXR1YmVWaWRlb0lkJykgPyBgaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj0ke2xvY2FsU3RvcmFnZS5nZXRJdGVtKCd5b3V0dWJlVmlkZW9JZCcpfWAgOiBERUZBVUxUX1lPVVRVQkVfVVJMOw0KICAgICAgICAgICAgdXBkYXRlVGFza0xpc3QoKTsNCiAgICAgICAgICAgIHVwZGF0ZVRhc2tTZWxlY3QoKTsNCiAgICAgICAgICAgIHVwZGF0ZVN0YXRpc3RpY3MoKTsNCiAgICAgICAgfTsNCiAgICAgICAgY29uc3Qgc2F2ZVNldHRpbmdzID0gKCkgPT4gew0KICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB7DQogICAgICAgICAgICAgICAgdGltZXMsIHRhc2tzLCBzdGF0aXN0aWNzLCBhdXRvU3RhcnRCcmVha3MsIHBvbW9kb3Jvc0JlZm9yZUxvbmdCcmVhaywNCiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25Tb3VuZHMsIG11dGVTb3VuZHMsIHNlbGVjdGVkVGFza0luZGV4LCBiYWNrZ3JvdW5kOiBkb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmRJbWFnZS5zbGljZSg1LCAtMikNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncG9tb2Rvcm9TZXR0aW5ncycsIEpTT04uc3RyaW5naWZ5KHNldHRpbmdzKSk7DQogICAgICAgIH07DQogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUNvbG9yKG1vZGUpIHsNCiAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gY29sb3JzW21vZGVdOw0KICAgICAgICAgICAgcHJvZ3Jlc3NDaXJjbGUuc3R5bGUuc3Ryb2tlID0gY29sb3I7DQogICAgICAgICAgICBwcm9ncmVzc0NpcmNsZUJnLnN0eWxlLnN0cm9rZSA9IGNvbG9yOw0KICAgICAgICAgICAgcHJvZ3Jlc3NDaXJjbGVCZy5zdHlsZS5vcGFjaXR5ID0gJzAuMic7DQogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29udHJvbHMgYnV0dG9uJykuZm9yRWFjaChidG4gPT4gew0KICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcjsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgbW9kZUJ1dHRvbnMuZm9yRWFjaChidG4gPT4gew0KICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcjsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gLS0tIFRpbWVyIEZ1bmN0aW9ucyAtLS0NCiAgICAgICAgY29uc3Qgc2V0UHJvZ3Jlc3MgPSBwZXJjZW50ID0+IHsNCiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IENJUkNMRV9DSVJDVU1GRVJFTkNFIC0gKHBlcmNlbnQgLyAxMDApICogQ0lSQ0xFX0NJUkNVTUZFUkVOQ0U7DQogICAgICAgICAgICBwcm9ncmVzc0NpcmNsZS5zdHlsZS5zdHJva2VEYXNob2Zmc2V0ID0gb2Zmc2V0Ow0KICAgICAgICB9Ow0KICAgICAgICBjb25zdCB1cGRhdGVEaXNwbGF5ID0gKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkVGltZSA9IGZvcm1hdFRpbWUoTWF0aC5tYXgoMCwgdGltZUxlZnQpKTsNCiAgICAgICAgICAgIHRpbWVEaXNwbGF5LnRleHRDb250ZW50ID0gZm9ybWF0dGVkVGltZTsNCiAgICAgICAgICAgIHNldFByb2dyZXNzbygodGltZXNbY3VycmVudE1vZGVdIC0gdGltZUxlZnQpIC8gdGltZXNbY3VycmVudE1vZGVdICogMTAwKTsNCiAgICAgICAgICAgIHBvbW9Db3VudGVyRGlzcGxheS50ZXh0Q29udGVudCA9IHN0YXRpc3RpY3MudG90YWxQb21vZG9yb3MgPiAwID8gc3RhdGlzdGljcy50b3RhbFBvbW9kb3JvcyA6ICcnOw0KICAgICAgICB9Ow0KICAgICAgICBjb25zdCBzZXRNb2RlID0gKG1vZGUpID0+IHsNCiAgICAgICAgICAgIG1vZGVCdXR0b25zLmZvckVhY2goYnRuID0+IHsNCiAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke21vZGV9YCkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7DQogICAgICAgICAgICBjdXJyZW50TW9kZSA9IG1vZGU7DQogICAgICAgICAgICB0aW1lTGVmdCA9IHRpbWVzW21vZGVdOw0KICAgICAgICAgICAgdXBkYXRlQ29sb3IobW9kZSk7DQogICAgICAgICAgICByZXNldFRpbWVyKCk7DQogICAgICAgICAgICB1cGRhdGVEaXNwbGF5KCk7DQogICAgICAgIH07DQogICAgICAgICBjb25zdCBzdGFydFRpbWVyID0gKCkgPT4gew0KICAgICAgICAgICAgaWYgKHRpbWVySWQpIHsNCiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpOw0KICAgICAgICAgICAgICAgIHRpbWVySWQgPSBudWxsOw0KICAgICAgICAgICAgICAgIHN0YXJ0QnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLXBsYXkiPjwvaT4gU3RhcnQnOw0KICAgICAgICAgICAgICAgIHlvdXR1YmVQbGF5ZXI/LnBhdXNlVmlkZW8oKTsNCg0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBzdGFydFRpbWVzdGFtcCA9IERhdGUubm93KCkgLSAoKHRpbWVzW2N1cnJlbnRNb2RlXSAtIHRpbWVMZWZ0KSAqIDEwMDApOw0KDQogICAgICAgICAgICAgICAgdGltZXJJZCA9IHNldEludGVydmFsKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxhcHNlZCA9IE1hdGguZmxvb3IoKERhdGUubm93KCkgLSBzdGFydFRpbWVzdGFtcCkgLyAxMDAwKTsNCiAgICAgICAgICAgICAgICAgICAgdGltZUxlZnQgPSB0aW1lc1tjdXJyZW50TW9kZV0gLSBlbGFwc2VkOw0KDQogICAgICAgICAgICAgICAgICAgIGlmICh0aW1lTGVmdCA8PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGltZXJJZCA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVUaW1lckVuZCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNb2RlID09PSAncG9tb2Rvcm8nKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB1cGRhdGVEaXNwbGF5KCk7DQogICAgICAgICAgICAgICAgfSwgMTAwMCk7DQoNCiAgICAgICAgICAgICAgICBzdGFydEJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS1wYXVzZSI+PC9pPiBQYXVzZSc7DQogICAgICAgICAgICAgICAgeW91dHViZVBsYXllcj8ucGxheVZpZGVvKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIGNvbnN0IHJlc2V0VGltZXIgPSAoKSA9PiB7DQogICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpOw0KICAgICAgICAgICAgdGltZXJJZCA9IG51bGw7DQogICAgICAgICAgICB0aW1lTGVmdCA9IHRpbWVzW2N1cnJlbnRNb2RlXTsNCiAgICAgICAgICAgIHVwZGF0ZURpc3BsYXkoKTsNCiAgICAgICAgICAgIHN0YXJ0QnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLXBsYXkiPjwvaT4gU3RhcnQnOw0KICAgICAgICAgICAgeW91dHViZVBsYXllcj8ucGF1c2VWaWRlbygpOw0KDQogICAgICAgIH07DQogICAgICAgIGNvbnN0IGhhbmRsZVRpbWVyRW5kID0gKCkgPT4gew0KICAgICAgICAgICAgbGV0IG5leHRNb2RlOw0KICAgICAgICAgICAgaWYgKGN1cnJlbnRNb2RlID09PSAncG9tb2Rvcm8nKSB7DQogICAgICAgICAgICAgICAgc3RhdGlzdGljcy50b3RhbFBvbW9kb3JvcysrOw0KICAgICAgICAgICAgICAgICBzdGF0aXN0aWNzLnRvdGFsRm9jdXNUaW1lICs9IHRpbWVzLnBvbW9kb3JvOyAvLyBBZGQgdGhlIHRpbWUgc3BlbnQNCiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRUYXNrSW5kZXggIT09IG51bGwpIHRhc2tzW3NlbGVjdGVkVGFza0luZGV4XS5wb21vZG9yb3MrKzsNCiAgICAgICAgICAgICAgICB1cGRhdGVTdGF0aXN0aWNzKCk7DQogICAgICAgICAgICAgICAgcGxheU5vdGlmaWNhdGlvblNvdW5kKCdwb21vZG9ybycpOw0KICAgICAgICAgICAgICAgIHNob3dOb3RpZmljYXRpb24oJ1BvbW9kb3JvIENvbXBsZXRlIScpOw0KICAgICAgICAgICAgICAgIHBvbW9kb3JvQ291bnQrKzsNCiAgICAgICAgICAgICAgICBuZXh0TW9kZSA9IChzdGF0aXN0aWNzLnRvdGFsUG9tb2Rvcm9zICUgcG9tb2Rvcm9zQmVmb3JlTG9uZ0JyZWFrID09PSAwKSA/ICdsb25nQnJlYWsnIDogJ3Nob3J0QnJlYWsnOw0KICAgICAgICAgICAgICAgIGlmIChuZXh0TW9kZSA9PT0gJ2xvbmdCcmVhaycpIHBvbW9kb3JvQ291bnQgPSAwOw0KDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHBsYXlOb3RpZmljYXRpb25Tb3VuZChjdXJyZW50TW9kZSk7DQogICAgICAgICAgICAgICAgc2hvd05vdGlmaWNhdGlvbignQnJlYWsgQ29tcGxldGUhJyk7DQogICAgICAgICAgICAgICAgbmV4dE1vZGUgPSAncG9tb2Rvcm8nOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gQXR1YWxpemEgbyBtb2RvIHZpc3VhbG1lbnRlDQogICAgICAgICAgICBtb2RlQnV0dG9ucy5mb3JFYWNoKGJ0biA9PiB7DQogICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtuZXh0TW9kZX1gKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsNCiAgICAgICAgICAgIGN1cnJlbnRNb2RlID0gbmV4dE1vZGU7DQoNCiAgICAgICAgICAgIC8vIEF0dWFsaXphIGEgY29yIGRvIHRpbWVyDQogICAgICAgICAgICB1cGRhdGVDb2xvcihjdXJyZW50TW9kZSk7DQoNCiAgICAgICAgICAgIC8vIERlZmluZSBvIG5vdm8gdGVtcG8gZSBhdHVhbGl6YSBvIGRpc3BsYXkNCiAgICAgICAgICAgIHRpbWVMZWZ0ID0gdGltZXNbY3VycmVudE1vZGVdOw0KICAgICAgICAgICAgdXBkYXRlRGlzcGxheSgpOw0KDQogICAgICAgICAgICBpZiAoYXV0b1N0YXJ0QnJlYWtzKSB7DQogICAgICAgICAgICAgICAgc3RhcnRUaW1lcigpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBzdGFydEJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS1wbGF5Ij48L2k+IFN0YXJ0JzsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdXBkYXRlVGFza0xpc3QoKTsNCiAgICAgICAgICAgIHNhdmVTZXR0aW5ncygpOw0KICAgICAgICB9Ow0KDQoNCiAgICAgICAgLy8gLS0tIFRhc2sgTWFuYWdlbWVudCAtLS0NCiAgICAgICAgY29uc3QgaGFuZGxlVGFza0lucHV0ID0gKGV2ZW50KSA9PiB7IGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIGFkZFRhc2soKTsgfTsNCiAgICAgICAgY29uc3QgYWRkVGFzayA9ICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHRhc2tJbnB1dCA9IGVsKCd0YXNrSW5wdXQnKTsNCiAgICAgICAgICAgIGNvbnN0IHRhc2tUZXh0ID0gdGFza0lucHV0LnZhbHVlLnRyaW0oKTsNCiAgICAgICAgICAgIGlmICh0YXNrVGV4dCkgew0KICAgICAgICAgICAgICAgIHRhc2tzLnB1c2goeyB0ZXh0OiBlc2NhcGVIdG1sKHRhc2tUZXh0KSwgY29tcGxldGVkOiBmYWxzZSwgcG9tb2Rvcm9zOiAwIH0pOw0KICAgICAgICAgICAgICAgIHRhc2tJbnB1dC52YWx1ZSA9ICcnOw0KICAgICAgICAgICAgICAgIHVwZGF0ZVRhc2tMaXN0KCk7DQogICAgICAgICAgICAgICAgdXBkYXRlVGFza1NlbGVjdCgpOw0KICAgICAgICAgICAgICAgIHNhdmVTZXR0aW5ncygpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KCQkNCgkJY29uc3QgZWRpdFRhc2sgPSAoaW5kZXgpID0+IHsNCgkJCWNvbnN0IG5ld1RleHQgPSBwcm9tcHQoJ0VudGVyIG5ldyB0YXNrIG5hbWU6JywgdGFza3NbaW5kZXhdLnRleHQpOw0KCQkJaWYgKG5ld1RleHQgIT09IG51bGwgJiYgbmV3VGV4dC50cmltKCkgIT09ICcnKSB7DQoJCQkJdGFza3NbaW5kZXhdLnRleHQgPSBlc2NhcGVIdG1sKG5ld1RleHQudHJpbSgpKTsNCgkJCQl1cGRhdGVUYXNrTGlzdCgpOw0KCQkJCXVwZGF0ZVRhc2tTZWxlY3QoKTsNCgkJCQlzYXZlU2V0dGluZ3MoKTsNCgkJCX0NCgkJfTsNCgkJDQoJCQ0KICAgICAgICBjb25zdCByZW1vdmVUYXNrID0gKGluZGV4KSA9PiB7DQogICAgICAgICAgICB0YXNrcy5zcGxpY2UoaW5kZXgsIDEpOw0KICAgICAgICAgICAgaWYgKHNlbGVjdGVkVGFza0luZGV4ID49IHRhc2tzLmxlbmd0aCkgc2VsZWN0ZWRUYXNrSW5kZXggPSBudWxsOw0KICAgICAgICAgICAgdXBkYXRlVGFza0xpc3QoKTsNCiAgICAgICAgICAgIHVwZGF0ZVRhc2tTZWxlY3QoKTsNCiAgICAgICAgICAgIHNhdmVTZXR0aW5ncygpOw0KICAgICAgICB9Ow0KICAgICAgICBjb25zdCB0b2dnbGVUYXNrID0gKGluZGV4KSA9PiB7DQogICAgICAgICAgICB0YXNrc1tpbmRleF0uY29tcGxldGVkID0gIXRhc2tzW2luZGV4XS5jb21wbGV0ZWQ7DQogICAgICAgICAgICB1cGRhdGVUYXNrTGlzdCgpOw0KICAgICAgICAgICAgc2F2ZVNldHRpbmdzKCk7DQogICAgICAgIH07DQogICAgICAgIGNvbnN0IHVwZGF0ZVRhc2tMaXN0ID0gKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgdGFza0xpc3REaXYgPSBlbCgndGFza0xpc3QnKTsNCiAgICAgICAgICAgIHRhc2tMaXN0RGl2LmlubmVySFRNTCA9ICcnOw0KICAgICAgICAgICAgdGFza3MuZm9yRWFjaCgodGFzaywgaW5kZXgpID0+IHsNCiAgICAgICAgICAgICAgICB0YXNrTGlzdERpdi5pbm5lckhUTUwgKz0gYA0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0YXNrLWl0ZW0gJHt0YXNrLmNvbXBsZXRlZCA/ICdjb21wbGV0ZWQnIDogJyd9Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgJHt0YXNrLmNvbXBsZXRlZCA/ICdjaGVja2VkJyA6ICcnfSBvbmNsaWNrPSJ0b2dnbGVUYXNrKCR7aW5kZXh9KSI+DQogICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke3Rhc2sudGV4dH08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0icG9tb2Rvcm8tY291bnQiPlBvbW9kb3JvczogJHt0YXNrLnBvbW9kb3Jvc308L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0YXNrLWFjdGlvbnMiPg0KCQkJCQkJCTxidXR0b24gY2xhc3M9InBvbW9kb3JvIiBvbmNsaWNrPSJlZGl0VGFzaygke2luZGV4fSkiPjxpIGNsYXNzPSJmYXMgZmEtcGVuIj48L2k+PC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0icG9tb2Rvcm8iIG9uY2xpY2s9InJlbW92ZVRhc2soJHtpbmRleH0pIj48aSBjbGFzcz0iZmFzIGZhLXRyYXNoIj48L2k+PC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9Ow0KICAgICAgICBjb25zdCB1cGRhdGVUYXNrU2VsZWN0ID0gKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgdGFza1NlbGVjdCA9IGVsKCd0YXNrU2VsZWN0Jyk7DQogICAgICAgICAgICB0YXNrU2VsZWN0LmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPlNlbGVjdCBhIHRhc2s8L29wdGlvbj4nOw0KICAgICAgICAgICAgdGFza3MuZm9yRWFjaCgodGFzaywgaW5kZXgpID0+IHsNCiAgICAgICAgICAgICAgICB0YXNrU2VsZWN0LmlubmVySFRNTCArPSBgPG9wdGlvbiB2YWx1ZT0iJHtpbmRleH0iPiR7dGFzay50ZXh0fTwvb3B0aW9uPmA7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHRhc2tTZWxlY3QudmFsdWUgPSBzZWxlY3RlZFRhc2tJbmRleCA9PT0gbnVsbCA/ICcnIDogc2VsZWN0ZWRUYXNrSW5kZXg7DQogICAgICAgIH07DQoNCiAgICAgICAgZWwoJ3Rhc2tTZWxlY3QnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBzZWxlY3RlZFRhc2tJbmRleCA9IHRoaXMudmFsdWUgPT09ICcnID8gbnVsbCA6IHBhcnNlSW50KHRoaXMudmFsdWUpOw0KICAgICAgICAgICAgc2F2ZVNldHRpbmdzKCk7DQogICAgICAgIH0pOw0KDQogICAgICAgIC8vIC0tLSBTZXR0aW5ncyBQYW5lbCAtLS0NCiAgICAgICAgY29uc3QgdG9nZ2xlU2V0dGluZ3MgPSAoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBzZXR0aW5nc1BhbmVsID0gZWwoJ3NldHRpbmdzUGFuZWwnKTsNCiAgICAgICAgICAgIHNldHRpbmdzUGFuZWwuc3R5bGUuZGlzcGxheSA9IHNldHRpbmdzUGFuZWwuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnID8gJ2Jsb2NrJyA6ICdub25lJzsNCiAgICAgICAgICAgIGlmIChzZXR0aW5nc1BhbmVsLnN0eWxlLmRpc3BsYXkgPT09ICdibG9jaycpIHNldHRpbmdzUGFuZWwuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcgfSk7DQogICAgICAgIH07DQogICAgICAgIGNvbnN0IHVwZGF0ZVRpbWVGcm9tSW5wdXQgPSAoaWQsIHZhbHVlKSA9PiB7DQogICAgICAgICAgICBjb25zdCBtb2RlID0gaWQucmVwbGFjZSgnVGltZScsICcnKTsNCiAgICAgICAgICAgIHRpbWVzW21vZGVdID0gcGFyc2VJbnQodmFsdWUsIDEwKSAqIDYwOw0KICAgICAgICAgICAgaWYgKGN1cnJlbnRNb2RlID09PSBtb2RlKSB7DQogICAgICAgICAgICAgICAgdGltZUxlZnQgPSB0aW1lc1tjdXJyZW50TW9kZV07DQogICAgICAgICAgICAgICAgdXBkYXRlRGlzcGxheSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2F2ZVNldHRpbmdzKCk7DQogICAgICAgIH07DQogICAgICAgIGNvbnN0IHVwZGF0ZUJhY2tncm91bmQgPSAodHlwZSkgPT4gew0KICAgICAgICAgICAgaWYgKHR5cGUgPT09ICd1cmwnKSB7DQogICAgICAgICAgICAgICAgY29uc3QgdXJsID0gZWwoJ2JnVXJsJykudmFsdWUudHJpbSgpOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gdXJsID8gYHVybCgnJHt1cmx9JylgIDogJyc7DQogICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdmaWxlJykgew0KICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBlbCgnYmdGaWxlJykuZmlsZXNbMF07DQogICAgICAgICAgICAgICAgaWYgKGZpbGUpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsNCiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgnJHtyZWFkZXIucmVzdWx0fScpYDsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVTZXR0aW5ncygpOw0KICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzYXZlU2V0dGluZ3MoKTsNCiAgICAgICAgfTsNCiAgICAgICAgY29uc3QgcmVtb3ZlQmFja2dyb3VuZCA9ICgpID0+IHsNCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJyc7DQogICAgICAgICAgICBlbCgnYmdVcmwnKS52YWx1ZSA9ICcnOw0KICAgICAgICAgICAgZWwoJ2JnRmlsZScpLnZhbHVlID0gJyc7DQogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmFja2dyb3VuZEltYWdlJywgJycpOw0KICAgICAgICAgICAgc2F2ZVNldHRpbmdzKCk7DQogICAgICAgIH07DQogICAgICAgIGNvbnN0IHVwZGF0ZVlvdVR1YmVWaWRlbyA9ICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHVybCA9IGVsKCd5b3V0dWJlVXJsJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCB2aWRlb0lkID0gZ2V0VmlkZW9JZCh1cmwpOw0KICAgICAgICAgICAgaWYgKHZpZGVvSWQgJiYgeW91dHViZVBsYXllciAmJiB5b3V0dWJlUGxheWVyLmxvYWRWaWRlb0J5SWQpIHsNCiAgICAgICAgICAgICAgICB5b3V0dWJlUGxheWVyLmxvYWRWaWRlb0J5SWQodmlkZW9JZCk7DQogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3lvdXR1YmVWaWRlb0lkJywgdmlkZW9JZCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzYXZlU2V0dGluZ3MoKTsNCiAgICAgICAgfTsNCiAgICAgICAgY29uc3QgcmVzZXRBbGxTZXR0aW5ncyA9ICgpID0+IHsNCiAgICAgICAgICAgIHRpbWVzID0geyAuLi5ERUZBVUxUX1RJTUVTIH07DQogICAgICAgICAgICBub3RpZmljYXRpb25Tb3VuZHMgPSB7IC4uLkRFRkFVTFRfU09VTkRTIH07DQogICAgICAgICAgICBhdXRvU3RhcnRCcmVha3MgPSB0cnVlOw0KICAgICAgICAgICAgcG9tb2Rvcm9zQmVmb3JlTG9uZ0JyZWFrID0gNDsNCiAgICAgICAgICAgIHN0YXRpc3RpY3MgPSB7IHRvdGFsUG9tb2Rvcm9zOiAwLCB0b3RhbEZvY3VzVGltZTogMCwgZGFpbHlTdHJlYWs6IDAsIGxhc3RDb21wbGV0ZWQ6IG51bGwgfTsNCiAgICAgICAgICAgIHRhc2tzID0gW107DQogICAgICAgICAgICBzZWxlY3RlZFRhc2tJbmRleCA9IG51bGw7DQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICcnOw0KICAgICAgICAgICAgZWwoJ3BvbW9kb3JvVGltZScpLnZhbHVlID0gdGltZXMucG9tb2Rvcm8gLyA2MDsNCiAgICAgICAgICAgIGVsKCdzaG9ydEJyZWFrVGltZScpLnZhbHVlID0gdGltZXMuc2hvcnRCcmVhayAvIDYwOw0KICAgICAgICAgICAgZWwoJ2xvbmdCcmVha1RpbWUnKS52YWx1ZSA9IHRpbWVzLmxvbmdCcmVhayAvIDYwOw0KICAgICAgICAgICAgZWwoJ3BvbW9kb3Jvc0JlZm9yZUxvbmdCcmVhaycpLnZhbHVlID0gcG9tb2Rvcm9zQmVmb3JlTG9uZ0JyZWFrOw0KICAgICAgICAgICAgZWwoJ2F1dG9TdGFydEJyZWFrcycpLmNoZWNrZWQgPSBhdXRvU3RhcnRCcmVha3M7DQogICAgICAgICAgICBlbCgncG9tb2Rvcm9Tb3VuZCcpLnZhbHVlID0gbm90aWZpY2F0aW9uU291bmRzLnBvbW9kb3JvOw0KICAgICAgICAgICAgZWwoJ3Nob3J0QnJlYWtTb3VuZCcpLnZhbHVlID0gbm90aWZpY2F0aW9uU291bmRzLnNob3J0QnJlYWs7DQogICAgICAgICAgICBlbCgnbG9uZ0JyZWFrU291bmQnKS52YWx1ZSA9IG5vdGlmaWNhdGlvblNvdW5kcy5sb25nQnJlYWs7DQogICAgICAgICAgICBlbCgnbXV0ZVNvdW5kcycpLmNoZWNrZWQgPSBtdXRlU291bmRzOw0KICAgICAgICAgICAgZWwoJ2JnVXJsJykudmFsdWUgPSAnJzsNCiAgICAgICAgICAgIGVsKCdiZ0ZpbGUnKS52YWx1ZSA9ICcnOw0KICAgICAgICAgICAgZWwoJ3lvdXR1YmVVcmwnKS52YWx1ZSA9IERFRkFVTFRfWU9VVFVCRV9VUkw7DQogICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgneW91dHViZVZpZGVvSWQnKTsNCiAgICAgICAgICAgIHJlc2V0VGltZXIoKTsNCiAgICAgICAgICAgIHVwZGF0ZVRhc2tMaXN0KCk7DQogICAgICAgICAgICB1cGRhdGVUYXNrU2VsZWN0KCk7DQogICAgICAgICAgICB1cGRhdGVTdGF0aXN0aWNzKCk7DQogICAgICAgICAgICBzYXZlU2V0dGluZ3MoKTsNCiAgICAgICAgfTsNCg0KICAgICAgICAvLyAtLS0gU3RhdGlzdGljcyAtLS0NCiAgICAgICAgY29uc3QgdXBkYXRlU3RhdGlzdGljcyA9ICgpID0+IHsNCiAgICAgICAgICAgIGVsKCd0b3RhbFBvbW9kb3Jvc1N0YXQnKS50ZXh0Q29udGVudCA9IHN0YXRpc3RpY3MudG90YWxQb21vZG9yb3M7DQogICAgICAgICAgICBlbCgndG90YWxUaW1lJykudGV4dENvbnRlbnQgPSBmb3JtYXRUaW1lKHN0YXRpc3RpY3MudG90YWxGb2N1c1RpbWUpOw0KICAgICAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvRGF0ZVN0cmluZygpOw0KICAgICAgICAgICAgY29uc3QgbGFzdENvbXBsZXRlZCA9IHN0YXRpc3RpY3MubGFzdENvbXBsZXRlZCA/IG5ldyBEYXRlKHN0YXRpc3RpY3MubGFzdENvbXBsZXRlZCkudG9EYXRlU3RyaW5nKCkgOiBudWxsOw0KICAgICAgICAgICAgaWYgKGxhc3RDb21wbGV0ZWQgPT09IHRvZGF5KSB7DQogICAgICAgICAgICAgICAgc3RhdGlzdGljcy5kYWlseVN0cmVhaysrOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChsYXN0Q29tcGxldGVkICE9PSBudWxsICYmIGxhc3RDb21wbGV0ZWQgIT09IHRvZGF5KSB7DQogICAgICAgICAgICAgICAgc3RhdGlzdGljcy5kYWlseVN0cmVhayA9IDE7DQogICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRpc3RpY3MudG90YWxQb21vZG9yb3MgPiAwICYmIGxhc3RDb21wbGV0ZWQgPT09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBzdGF0aXN0aWNzLmRhaWx5U3RyZWFrID0gMTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHN0YXRpc3RpY3MubGFzdENvbXBsZXRlZCA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBzYXZlU2V0dGluZ3MoKTsNCiAgICAgICAgfTsNCg0KICAgICAgICAvLyBOb3ZvIEV2ZW50IExpc3RlbmVyIHBhcmEgdmlzaWJpbGlkYWRlIGRhIHDDoWdpbmENCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsICgpID0+IHsNCiAgICAgICAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09ICd2aXNpYmxlJyAmJiB0aW1lcklkKSB7DQogICAgICAgICAgICAgICAgLy8gUmVjYWxjdWxhIG8gdGVtcG8gcmVzdGFudGUgYmFzZWFkbyBubyB0aW1lc3RhbXAgaW5pY2lhbA0KICAgICAgICAgICAgICAgIGNvbnN0IGVsYXBzZWQgPSBNYXRoLmZsb29yKChEYXRlLm5vdygpIC0gc3RhcnRUaW1lc3RhbXApIC8gMTAwMCk7DQogICAgICAgICAgICAgICAgdGltZUxlZnQgPSBNYXRoLm1heCgwLCB0aW1lc1tjdXJyZW50TW9kZV0gLSBlbGFwc2VkKTsNCiAgICAgICAgICAgICAgICB1cGRhdGVEaXNwbGF5KCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KDQogICAgICAgICAvLyBGdW7Dp8O1ZXMgcGFyYSBsaWRhciBjb20gc29ucyBlIG5vdGlmaWNhw6fDtWVzDQogICAgDQogICAgICAgIGNvbnN0IHBsYXlOb3RpZmljYXRpb25Tb3VuZCA9IChtb2RlKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKCFtdXRlU291bmRzKSB7DQogICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVhZHkudGhlbihyZWdpc3RyYXRpb24gPT4gew0KICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RyYXRpb24uYWN0aXZlLnBvc3RNZXNzYWdlKHsgdHlwZTogJ3BsYXlTb3VuZCcsIHNvdW5kOiBub3RpZmljYXRpb25Tb3VuZHNbbW9kZV19KTsNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0NCiAgICAgICB9Ow0KDQoNCiAgICAgICAgLy8gLS0tIEV2ZW50IExpc3RlbmVycyAtLS0NCiAgICAgICAgZWwoJ3BvbW9kb3JvVGltZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB1cGRhdGVUaW1lRnJvbUlucHV0KCdwb21vZG9yb1RpbWUnLCBlLnRhcmdldC52YWx1ZSkpOw0KICAgICAgICBlbCgnc2hvcnRCcmVha1RpbWUnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4gdXBkYXRlVGltZUZyb21JbnB1dCgnc2hvcnRCcmVha1RpbWUnLCBlLnRhcmdldC52YWx1ZSkpOw0KICAgICAgICBlbCgnbG9uZ0JyZWFrVGltZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB1cGRhdGVUaW1lRnJvbUlucHV0KCdsb25nQnJlYWtUaW1lJywgZS50YXJnZXQudmFsdWUpKTsNCiAgICAgICAgZWwoJ3BvbW9kb3Jvc0JlZm9yZUxvbmdCcmVhaycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7DQogICAgICAgICAgICBwb21vZG9yb3NCZWZvcmVMb25nQnJlYWsgPSBwYXJzZUludChlLnRhcmdldC52YWx1ZSwgMTApOw0KICAgICAgICAgICAgc2F2ZVNldHRpbmdzKCk7DQogICAgICAgIH0pOw0KICAgICAgICBlbCgnYXV0b1N0YXJ0QnJlYWtzJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHsNCiAgICAgICAgICAgIGF1dG9TdGFydEJyZWFrcyA9IGUudGFyZ2V0LmNoZWNrZWQ7DQogICAgICAgICAgICBzYXZlU2V0dGluZ3MoKTsNCiAgICAgICAgfSk7DQogICAgICAgIGVsKCdwb21vZG9yb1NvdW5kJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHsNCiAgICAgICAgICAgIG5vdGlmaWNhdGlvblNvdW5kcy5wb21vZG9ybyA9IGUudGFyZ2V0LnZhbHVlOw0KICAgICAgICAgICAgc2F2ZVNldHRpbmdzKCk7DQogICAgICAgIH0pOw0KICAgICAgICBlbCgnc2hvcnRCcmVha1NvdW5kJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHsNCiAgICAgICAgICAgIG5vdGlmaWNhdGlvblNvdW5kcy5zaG9ydEJyZWFrID0gZS50YXJnZXQudmFsdWU7DQogICAgICAgICAgICBzYXZlU2V0dGluZ3MoKTsNCiAgICAgICAgfSk7DQogICAgICAgIGVsKCdsb25nQnJlYWtTb3VuZCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7DQogICAgICAgICAgICBub3RpZmljYXRpb25Tb3VuZHMubG9uZ0JyZWFrID0gZS50YXJnZXQudmFsdWU7DQogICAgICAgICAgICBzYXZlU2V0dGluZ3MoKTsNCiAgICAgICAgfSk7DQogICAgICAgIGVsKCdtdXRlU291bmRzJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHsNCiAgICAgICAgICAgIG11dGVTb3VuZHMgPSBlLnRhcmdldC5jaGVja2VkOw0KICAgICAgICAgICAgc2F2ZVNldHRpbmdzKCk7DQogICAgICAgIH0pOw0KICAgICAgICBlbCgneW91dHViZVVybCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHVwZGF0ZVlvdVR1YmVWaWRlbyk7DQoNCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4gew0KICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC50YWdOYW1lICE9PSAnSU5QVVQnICYmIGV2ZW50LnRhcmdldC50YWdOYW1lICE9PSAnU0VMRUNUJyAmJiBldmVudC50YXJnZXQudGFnTmFtZSAhPT0gJ1RFWFRBUkVBJykgew0KICAgICAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuY29kZSkgew0KICAgICAgICAgICAgICAgICAgICBjYXNlICdTcGFjZSc6DQogICAgICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWVyKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50IHBhZ2Ugc2Nyb2xsaW5nDQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAnS2V5Uic6DQogICAgICAgICAgICAgICAgICAgICAgICByZXNldFRpbWVyKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAnRGlnaXQxJzoNCiAgICAgICAgICAgICAgICAgICAgICAgIHNldE1vZGUoJ3BvbW9kb3JvJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAnRGlnaXQyJzoNCiAgICAgICAgICAgICAgICAgICAgICAgIHNldE1vZGUoJ3Nob3J0QnJlYWsnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICBjYXNlICdEaWdpdDMnOg0KICAgICAgICAgICAgICAgICAgICAgICAgc2V0TW9kZSgnbG9uZ0JyZWFrJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KDQogICAgICAgIC8vIC0tLSBUaGVtZSBUb2dnbGUgLS0tDQogICAgICAgIGNvbnN0IHRvZ2dsZVRoZW1lID0gKCkgPT4gew0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdkYXJrLW1vZGUnKTsNCiAgICAgICAgICAgIGNvbnN0IGljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGhlbWUtdG9nZ2xlIGknKTsNCiAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LnRvZ2dsZSgnZmEtbW9vbicpOw0KICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QudG9nZ2xlKCdmYS1zdW4nKTsNCiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0aGVtZScsIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdkYXJrLW1vZGUnKSA/ICdkYXJrJyA6ICdsaWdodCcpOw0KICAgICAgICB9Ow0KICAgICAgICAgIC8vIC0tLSBUaGVtZSBDaGFuZ2UgTGlzdGVuZXIgLS0tDQogICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZXZlbnQpIHsNCiAgICAgICAgICAgIGlmIChldmVudC5kYXRhLnR5cGUgPT09ICd0aGVtZUNoYW5nZScpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBuZXdUaGVtZSA9IGV2ZW50LmRhdGEudGhlbWU7DQogICAgICAgICAgICAgICAgIGlmIChuZXdUaGVtZSA9PT0gJ2RhcmsnKSB7DQogICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2RhcmstbW9kZScpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZGFyay1tb2RlJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCg0KICAgICAgICAgLy8gVmVyaWZpY2Egc2UgasOhIGV4aXN0ZSB0ZW1hIHNhbHZvIG5vIGxvY2FsIHN0b3JhZ2UgZG8gcG9tb2Rvcm8NCiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLCAoKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3Qgc2F2ZWRUaGVtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0aGVtZSIpOw0KICAgICAgICAgICAgICAgIGlmIChzYXZlZFRoZW1lID09ICJkYXJrIil7DQogICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdkYXJrLW1vZGUnKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KDQogICAgICAgIC8vIC0tLSBLZXlib2FyZCBTaG9ydGN1dHMgVG9nZ2xlIC0tLQ0KICAgICAgICBjb25zdCB0b2dnbGVLZXlib2FyZFNob3J0Y3V0cyA9ICgpID0+IHsNCiAgICAgICAgICAgIGtleWJvYXJkU2hvcnRjdXRzRGl2LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUnKTsNCiAgICAgICAgfTsNCg0KICAgICAgICAvLyAtLS0gSW5pdGlhbGl6YXRpb24gLS0tDQogICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4gew0KICAgICAgICAgICAgbG9hZFNldHRpbmdzKCk7DQogICAgICAgICAgICB1cGRhdGVDb2xvcihjdXJyZW50TW9kZSk7DQogICAgICAgICAgICBzZXRNb2RlKCdwb21vZG9ybycpOw0KICAgICAgICAgICAgdXBkYXRlRGlzcGxheSgpOw0KICAgICAgICAgICAgIGNvbnN0IHNhdmVkVGhlbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGhlbWUnKTsNCiAgICAgICAgICAgIGlmIChzYXZlZFRoZW1lID09PSAnZGFyaycpIHsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2RhcmstbW9kZScpOw0KICAgICAgICAgICAgICAgICBjb25zdCBpY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRoZW1lLXRvZ2dsZSBpJyk7DQogICAgICAgICAgICAgICAgIGljb24uY2xhc3NMaXN0LnJlbW92ZSgnZmEtbW9vbicpOw0KICAgICAgICAgICAgICAgICBpY29uLmNsYXNzTGlzdC5hZGQoJ2ZhLXN1bicpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAvLyBTb2xpY2l0YXIgcGVybWlzc8OjbyBwYXJhIG5vdGlmaWNhw6fDtWVzDQogICAgICAgICAgICBpZiAoJ05vdGlmaWNhdGlvbicgaW4gd2luZG93KSB7DQogICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCk7DQogICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICBpZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikgew0KICAgICAgICAgICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcignL3N3LmpzJywge3Njb3BlOiAnLyd9KQ0KICAgICAgICAgICAgICAgICAudGhlbihyZWdpc3RyYXRpb24gPT4gew0KICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBldmVudCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZXZlbnQuZGF0YS50eXBlID09ICJwbGF5U291bmQiKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVCZWVwKDIwMCwgMTUwMCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIH0NCg0KICAgICAgICB9KTsNCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCAoZXZlbnQpID0+IHsNCiAgICAgICAgICAgIGlmIChldmVudC5rZXkgPT09ICdwb21vZG9yb1NldHRpbmdzJykgbG9hZFNldHRpbmdzKCk7DQogICAgICAgIH0pOw0KDQogICAgICAgICBmdW5jdGlvbiBjcmVhdGVCZWVwKGZyZXF1ZW5jeSA9IDQ0MCwgZHVyYXRpb24gPSAyMDAwLCB2b2x1bWUgPSAwLjUpIHsNCiAgICAgICAgICAgIGNvbnN0IGF1ZGlvQ29udGV4dCA9IG5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSgpOw0KICAgICAgICAgICAgY29uc3Qgb3NjaWxsYXRvciA9IGF1ZGlvQ29udGV4dC5jcmVhdGVPc2NpbGxhdG9yKCk7DQogICAgICAgICAgICBjb25zdCBnYWluTm9kZSA9IGF1ZGlvQ29udGV4dC5jcmVhdGVHYWluKCk7DQoNCiAgICAgICAgICAgIG9zY2lsbGF0b3IuY29ubmVjdChnYWluTm9kZSk7DQogICAgICAgICAgICBnYWluTm9kZS5jb25uZWN0KGF1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbik7DQoNCiAgICAgICAgICAgIG9zY2lsbGF0b3IuZnJlcXVlbmN5LnZhbHVlID0gZnJlcXVlbmN5Ow0KICAgICAgICAgICAgZ2Fpbk5vZGUuZ2Fpbi52YWx1ZSA9IHZvbHVtZTsNCg0KICAgICAgICAgICAgb3NjaWxsYXRvci5zdGFydCgpOw0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgb3NjaWxsYXRvci5zdG9wKCk7DQogICAgICAgICAgICAgICAgYXVkaW9Db250ZXh0LmNsb3NlKCk7DQogICAgICAgICAgICB9LCBkdXJhdGlvbik7DQogICAgICAgIH0NCg0KICAgIDwvc2NyaXB0Pg0KPC9ib2R5Pg0KDQo8L2h0bWw+";

    // Função para decodificar base64
    function decodeBase64(str) {
        try {
             return decodeURIComponent(atob(str).split('').map(function(c) {
            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
        }).join(''));
        } catch (e) {
            console.error("Erro ao decodificar Base64:", e);
             return "";
        }
       
    }

    // Decodifica o conteúdo
    const pomodoroAppHTML = decodeBase64(pomodoroAppBase64);

    // Inicializa a visualização com o conteúdo da aplicação
     liveFrame.srcdoc = pomodoroAppHTML;
       function toggleTheme() {
            const body = document.body;
            const currentTheme = body.getAttribute('data-theme') || 'light';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            body.setAttribute('data-theme', newTheme);
              localStorage.setItem('theme', newTheme)
              if (liveFrame && liveFrame.contentWindow) {
                 liveFrame.contentWindow.postMessage({ type: 'themeChange', theme: newTheme }, '*');
            }
        }
        
           // Inicializa o tema salvo no local storage
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                document.body.setAttribute('data-theme', savedTheme);
            }
          });


</script>